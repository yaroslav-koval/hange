# Hange

/Ààh…ëÀên.d íi/ (han-jee)

<img width="250" height="250" alt="image" src="https://github.com/user-attachments/assets/7d15a702-11bb-4a3e-bcc9-5eae084f5d3e" />

![coverage](https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/yaroslav-koval/hange/main/configs/badges/test-coverage.json)
[![Go Report Card](https://goreportcard.com/badge/github.com/yaroslav-koval/hange)](https://goreportcard.com/report/github.com/yaroslav-koval/hange)
![ARM size](https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/yaroslav-koval/hange/main/configs/badges/binary-size-arm64.json)
![AMD size](https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/yaroslav-koval/hange/main/configs/badges/binary-size-amd64.json)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

A small CLI soldier that goes hand in hand with a developer. An agentic answer for a routine tasks.

### Buzzwords üòé

Agent, RAG, Vector store, Goroutines, Worker Pool, Cobra CLI (MCP not adopted yet üòî)

## Development

Shortest way to build the command is

```shell
go install . && hange -h  
```

## Techs

This project is powered by [Go Cobra library](https://github.com/spf13/cobra) that provides the framework for CLI
applications.

## Installation

Hange can be installed by 2 ways:

1. Install it from GitHub repository by specific tag
    ```shell
    go install github.com/yaroslav-koval/hange
    ```
2. Clone this repo locally and install using
   ```shell
   go install .
    ```

## Requirements

* openAI access token
* git (binary)
* go 1.25+ (only for installation by Go commands. Not needed if downloaded from a GitHub release)

## Project structure

Despite this is CLI project, it's created in platform-agnostic way, so modules can be used in other scenarios, like
HTTP, etc.

Some of the modules, like [auth](pkg/auth) contains business logic that is implemented by adapters. Adapters resides
near the main folder, so the structure looks like:

* `auth` - contains business logic and interface declarations of both types: driver and driven. Here resides declaration
  and
  implementation for a driver interface(s).
* `auth/adapter1` - implements one of driven interfaces
* `auth/adapter2` - implements another driven interface

## Tests

Tests are powered by [Testify](https://github.com/stretchr/testify) and [Mockery](https://github.com/vektra/mockery)

All the mocks stored in directory [mocks](mocks).
Mocks for all the existing in application interfaces can be generated by running:

```shell
make gen-mocks
```

## Reasons of using specific models.

Different commands can call different models by their reasons:

* `explain` works with one of `gpt` models, despite `gpt-codex` models would fit here better. Reason is work with files
  and vector stores, this feature is not available for `codex` models.
* `commit-msg` and `commit` commands work with `gpt-codex`, commit content is embedded into input.
